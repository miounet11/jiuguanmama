# Claude 开发指导文档

## 项目核心原则

### 🎯 生产就绪开发原则
**重要**: 整个开发过程以上线为目标，不允许使用模拟数据或临时方案。

1. **真实数据原则**
   - ❌ 禁止使用模拟数据、mock数据、假数据
   - ✅ 数据库缺少内容时，生成真实的游戏数据作为种子数据
   - ✅ 所有API端点必须基于真实数据库查询
   - ✅ 创建真实的角色、故事书、用户等基础数据

2. **问题解决文档化**
   - 每次解决问题都必须记录在`问题解决文档.md`中
   - 包含问题描述、解决方案、影响文件、代码示例
   - 防止反复修改导致回归错误
   - 为后续开发提供重要参考资料

3. **代码质量标准**
   - 所有TypeScript错误必须修复，不允许跳过
   - 遵循现有项目架构和代码风格
   - 每次修改前充分理解现有代码
   - 确保所有功能在生产环境标准下工作

## 项目架构

### 技术栈
- **前端**: Vue 3 + TypeScript + Tailwind CSS + Vite
- **后端**: Node.js + Express + TypeScript
- **数据库**: SQLite (开发) + Prisma ORM
- **构建工具**: Turbo (monorepo)

### 核心功能
这是一个AI角色扮演对话平台（云酒馆 TavernAI Plus），主要功能：
- AI角色创建和管理
- 角色对话和聊天
- 角色市场和分享
- 用户社区功能

## 开发工作流

### 问题解决标准流程
1. **问题识别**: 准确描述问题现象和影响范围
2. **原因分析**: 找出问题根本原因，不只是表面症状
3. **解决方案**: 制定符合生产标准的解决方案
4. **代码实现**: 遵循项目架构和代码规范
5. **文档记录**: 在`问题解决文档.md`中详细记录
6. **验证测试**: 确保修复有效且不产生新问题

### 数据库操作原则
1. **种子数据生成**: 缺少数据时创建丰富的真实内容
   - 角色: 创建多样化的AI角色（不同类型、风格、背景）
   - 故事: 生成有趣的角色背景故事和对话场景
   - 用户: 创建测试用户账户（符合真实使用场景）

2. **数据结构完整性**
   - 确保所有外键关系正确
   - 填充所有必需字段
   - 创建合理的数据关联

### 代码修改原则
1. **先读后写**: 充分理解现有代码再进行修改
2. **最小化修改**: 只修改必要的部分，避免大范围重构
3. **类型安全**: 修复所有TypeScript类型错误
4. **向后兼容**: 确保修改不破坏现有功能

## 当前项目状态

### 已解决问题
- ✅ 产品方向纠正（从工作流编辑器改为AI角色扮演平台）
- ✅ 数据库配置修复（PostgreSQL → SQLite）
- ✅ 前端API端口配置修复
- ✅ 基础API端点添加

### 正在解决
- 🔄 TypeScript类型错误修复
- 🔄 移除所有模拟数据，使用真实数据库
- 🔄 创建丰富的种子数据

### 待解决
- ⏳ 数据库种子数据生成
- ⏳ 用户认证流程完善
- ⏳ UI界面最终调优

## 重要提醒

⚠️ **绝对禁止的行为**:
- 使用模拟数据、mock数据解决问题
- 跳过TypeScript类型错误
- 不记录问题解决过程
- 破坏现有架构进行快速修复

✅ **推荐的行为**:
- 创建真实、丰富的种子数据
- 详细记录每次问题解决过程
- 遵循生产环境开发标准
- 确保代码质量和类型安全

---

*此文档随项目发展持续更新，确保开发团队始终遵循统一的高质量标准。*
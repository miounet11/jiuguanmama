import{d as w,k as S,r as x,o as k,c as C,a as D,b as s,t as a}from"./index-Dgends3d.js";import{i as B}from"./axios-DIbbNOPG.js";const F={class:"min-h-screen bg-gray-50 py-8"},M={class:"max-w-7xl mx-auto px-4"},N={class:"bg-white rounded-lg shadow p-6"},U={class:"flex items-center space-x-4 mb-6"},L=["src","alt"],P={class:"text-2xl font-bold"},z={class:"text-gray-600"},A={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},E={class:"border rounded-lg p-4"},K={class:"space-y-2 text-sm"},T={class:"ml-2"},V={class:"ml-2"},j={class:"border rounded-lg p-4"},q={class:"space-y-2 text-sm"},G={class:"ml-2"},H={class:"ml-2"},I={class:"border rounded-lg p-4"},J={class:"space-y-2 text-sm"},O={class:"ml-2"},Q={class:"ml-2"},Y=w({__name:"ProfilePage",setup(R){const f=S(),o=x(f.user),l=x({}),h=e=>e?new Date(e).toLocaleDateString("zh-CN"):"未知",y=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString(),b=async()=>{try{const e=await B.get("/api/user/stats");l.value=e.data}catch(e){console.error("Failed to fetch user stats:",e)}};return k(()=>{b()}),(e,t)=>{var n,r,d,i,c,u,p,m,v,_,g;return D(),C("div",F,[s("div",M,[s("div",N,[s("div",U,[s("img",{src:((n=o.value)==null?void 0:n.avatar)||"/default-avatar.png",alt:(r=o.value)==null?void 0:r.username,class:"w-20 h-20 rounded-full"},null,8,L),s("div",null,[s("h1",P,a((d=o.value)==null?void 0:d.username),1),s("p",z,a((i=o.value)==null?void 0:i.email),1)])]),s("div",A,[s("div",E,[t[2]||(t[2]=s("h3",{class:"font-semibold mb-2"},"账户信息",-1)),s("div",K,[s("div",null,[t[0]||(t[0]=s("span",{class:"text-gray-500"},"注册时间:",-1)),s("span",T,a(h((c=o.value)==null?void 0:c.createdAt)),1)]),s("div",null,[t[1]||(t[1]=s("span",{class:"text-gray-500"},"会员等级:",-1)),s("span",V,a(((u=o.value)==null?void 0:u.tier)||"免费用户"),1)])])]),s("div",j,[t[5]||(t[5]=s("h3",{class:"font-semibold mb-2"},"使用统计",-1)),s("div",q,[s("div",null,[t[3]||(t[3]=s("span",{class:"text-gray-500"},"创建角色:",-1)),s("span",G,a(((p=l.value)==null?void 0:p.charactersCreated)||0),1)]),s("div",null,[t[4]||(t[4]=s("span",{class:"text-gray-500"},"总对话数:",-1)),s("span",H,a(((m=l.value)==null?void 0:m.totalChats)||0),1)])])]),s("div",I,[t[8]||(t[8]=s("h3",{class:"font-semibold mb-2"},"配额使用",-1)),s("div",J,[s("div",null,[t[6]||(t[6]=s("span",{class:"text-gray-500"},"本月消息:",-1)),s("span",O,a(((v=l.value)==null?void 0:v.monthlyMessages)||0)+" / "+a(((_=l.value)==null?void 0:_.messageLimit)||"无限"),1)]),s("div",null,[t[7]||(t[7]=s("span",{class:"text-gray-500"},"Token使用:",-1)),s("span",Q,a(y(((g=l.value)==null?void 0:g.tokensUsed)||0)),1)])])])])])])])}}});export{Y as default};

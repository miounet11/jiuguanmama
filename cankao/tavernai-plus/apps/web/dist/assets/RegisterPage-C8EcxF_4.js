import{d as T,k as q,l as U,r as d,x as u,c as n,a,b as t,j as m,g as B,w as N,h as j,m as A,f as c,p,v as x,n as D,y as h,t as v,q as R,u as Z}from"./index-Dgends3d.js";const E={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},F={class:"max-w-md w-full space-y-8"},H={class:"mt-2 text-center text-sm text-gray-600"},I={class:"space-y-4"},L={key:0,class:"mt-2"},G={class:"flex items-center"},J={class:"flex-1 bg-gray-200 rounded-full h-2 mr-2"},K={key:0,class:"mt-1 text-sm text-red-600"},O={class:"flex items-center"},Q={key:0,class:"rounded-md bg-red-50 p-4"},W={class:"flex"},X={class:"ml-3"},Y={class:"mt-2 text-sm text-red-700"},$={key:1,class:"rounded-md bg-green-50 p-4"},ee={class:"flex"},te={class:"ml-3"},se={class:"mt-2 text-sm text-green-700"},oe=["disabled"],re={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},le=T({__name:"RegisterPage",setup(ne){const k=Z(),_=q(),s=U({username:"",email:"",password:"",confirmPassword:""}),w=d(!1),l=d(!1),f=d(""),g=d(""),i=d(0),b=u(()=>s.username&&s.email&&s.password&&s.confirmPassword&&s.password===s.confirmPassword&&s.password.length>=8&&w.value),P=u(()=>i.value*25),C=u(()=>{const o=i.value;return o<=1?"bg-red-500":o<=2?"bg-yellow-500":o<=3?"bg-blue-500":"bg-green-500"}),S=u(()=>{const o=i.value;return o<=1?"弱":o<=2?"一般":o<=3?"强":"很强"}),V=u(()=>{const o=i.value;return o<=1?"text-red-600":o<=2?"text-yellow-600":o<=3?"text-blue-600":"text-green-600"}),z=()=>{let o=0;const e=s.password;e.length>=8&&o++,e.length>=12&&o++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&o++,/[0-9]/.test(e)&&o++,/[^A-Za-z0-9]/.test(e)&&o++,i.value=Math.min(o,4)},M=async()=>{var o,e;if(b.value){l.value=!0,f.value="",g.value="";try{await _.register({username:s.username,email:s.email,password:s.password}),g.value="注册成功！正在跳转到登录页面...",setTimeout(()=>{k.push("/login")},2e3)}catch(y){f.value=((e=(o=y.response)==null?void 0:o.data)==null?void 0:e.message)||"注册失败，请稍后再试"}finally{l.value=!1}}};return(o,e)=>{const y=j("router-link");return a(),n("div",E,[t("div",F,[t("div",null,[e[7]||(e[7]=t("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," 创建新账户 ",-1)),t("p",H,[e[6]||(e[6]=m(" 或者 ",-1)),B(y,{to:"/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:N(()=>[...e[5]||(e[5]=[m(" 使用已有账户登录 ",-1)])]),_:1})])]),t("form",{class:"mt-8 space-y-6",onSubmit:A(M,["prevent"])},[t("div",I,[t("div",null,[e[8]||(e[8]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," 用户名 ",-1)),p(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=r=>s.username=r),name:"username",type:"text",autocomplete:"username",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"选择一个用户名"},null,512),[[x,s.username]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," 邮箱地址 ",-1)),p(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=r=>s.email=r),name:"email",type:"email",autocomplete:"email",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"your@email.com"},null,512),[[x,s.email]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," 密码 ",-1)),p(t("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=r=>s.password=r),name:"password",type:"password",autocomplete:"new-password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"至少8个字符",onInput:z},null,544),[[x,s.password]]),s.password?(a(),n("div",L,[t("div",G,[t("div",J,[t("div",{class:h([C.value,"h-2 rounded-full transition-all"]),style:D({width:P.value+"%"})},null,6)]),t("span",{class:h([V.value,"text-xs"])},v(S.value),3)])])):c("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"}," 确认密码 ",-1)),p(t("input",{id:"confirmPassword","onUpdate:modelValue":e[3]||(e[3]=r=>s.confirmPassword=r),name:"confirmPassword",type:"password",autocomplete:"new-password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"再次输入密码"},null,512),[[x,s.confirmPassword]]),s.confirmPassword&&s.password!==s.confirmPassword?(a(),n("p",K," 密码不匹配 ")):c("",!0)])]),t("div",O,[p(t("input",{id:"agree-terms","onUpdate:modelValue":e[4]||(e[4]=r=>w.value=r),name:"agree-terms",type:"checkbox",required:"",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[R,w.value]]),e[12]||(e[12]=t("label",{for:"agree-terms",class:"ml-2 block text-sm text-gray-900"},[m(" 我同意 "),t("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"},"服务条款"),m(" 和 "),t("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"},"隐私政策")],-1))]),f.value?(a(),n("div",Q,[t("div",W,[t("div",X,[e[13]||(e[13]=t("h3",{class:"text-sm font-medium text-red-800"}," 注册失败 ",-1)),t("div",Y,[t("p",null,v(f.value),1)])])])])):c("",!0),g.value?(a(),n("div",$,[t("div",ee,[t("div",te,[e[14]||(e[14]=t("h3",{class:"text-sm font-medium text-green-800"}," 注册成功 ",-1)),t("div",se,[t("p",null,v(g.value),1)])])])])):c("",!0),t("div",null,[t("button",{type:"submit",disabled:l.value||!b.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(a(),n("span",re,[...e[15]||(e[15]=[t("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):c("",!0),m(" "+v(l.value?"注册中...":"创建账户"),1)],8,oe)])],32)])])}}});export{le as default};

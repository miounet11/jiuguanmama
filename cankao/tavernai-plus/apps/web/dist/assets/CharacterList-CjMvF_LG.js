import{d as T,r as d,x as k,o as A,c as a,a as l,b as e,f as y,p as w,v as I,z as M,e as D,F as C,i as V,t as n,j as B,y as H,u as U}from"./index-Dgends3d.js";import{i as E}from"./axios-DIbbNOPG.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"min-h-screen bg-gray-50 py-8"},R={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},q={class:"mb-8"},G={class:"flex flex-col sm:flex-row gap-4"},J={class:"flex-1"},O={class:"relative"},W={key:0,class:"flex justify-center items-center h-64"},X={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Y=["onClick"],Z={class:"relative h-64 bg-gradient-to-br from-purple-400 to-pink-400"},ee=["src","alt"],te={key:1,class:"w-full h-full flex items-center justify-center"},oe={class:"text-white text-4xl font-bold"},se={key:2,class:"absolute top-2 left-2 bg-green-500 text-white px-2 py-1 rounded text-xs"},ae={key:3,class:"absolute top-2 right-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs"},le={class:"p-4"},re={class:"font-semibold text-lg mb-1 truncate"},ie={class:"text-gray-600 text-sm mb-2"},ne={class:"text-gray-500 text-sm line-clamp-2 mb-3"},de={class:"flex items-center justify-between text-sm text-gray-500"},ue={class:"flex items-center space-x-4"},ce={class:"flex items-center"},ve={class:"flex items-center"},me={class:"flex items-center"},pe={class:"ml-1"},ge={key:2,class:"text-center py-12"},xe={key:3,class:"mt-8 flex justify-center"},fe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},he=["disabled"],be=["onClick"],ye=["disabled"],L=12,we=T({__name:"CharacterList",setup(_e){const j=U(),c=d([]),m=d(!1),p=d(""),g=d(""),x=d("popular"),r=d(1),f=d(0),v=k(()=>Math.ceil(f.value/L)),z=k(()=>{const s=[];let o=Math.max(1,r.value-Math.floor(2.5)),i=Math.min(v.value,o+5-1);i-o<4&&(o=Math.max(1,i-5+1));for(let b=o;b<=i;b++)s.push(b);return s}),_=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString(),u=async()=>{m.value=!0;try{const s={page:r.value,limit:L,search:p.value,category:g.value,sort:x.value},t=await E.get("/api/characters",{params:s});c.value=t.data.characters,f.value=t.data.total}catch(s){console.error("Failed to fetch characters:",s),c.value=N(),f.value=50}finally{m.value=!1}},N=()=>{const s=["艾莉亚","赛博朋克2077","原神角色","火影忍者","初音未来","洛天依","AI助手","虚拟偶像"],t=["anime","game","movie","book","original","historical","vtuber"];return Array.from({length:12},(o,i)=>({id:`char-${i+1}`,name:s[i%s.length]+(i>7?` ${i-7}`:""),avatar:"",description:"这是一个有趣的角色，拥有独特的个性和背景故事。快来和我聊天吧！",creator:`用户${Math.floor(Math.random()*1e3)}`,category:t[i%t.length],chats:Math.floor(Math.random()*1e5),likes:Math.floor(Math.random()*1e4),rating:3.5+Math.random()*1.5,isNew:Math.random()>.7,isPremium:Math.random()>.8}))},P=()=>{r.value=1,u()},$=()=>{r.value=1,u()},F=()=>{r.value=1,u()},h=s=>{s>=1&&s<=v.value&&(r.value=s,u())},S=s=>{j.push(`/characters/${s}`)};return A(()=>{u()}),(s,t)=>(l(),a("div",Q,[e("div",R,[e("div",q,[t[8]||(t[8]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"探索角色",-1)),e("div",G,[e("div",J,[e("div",O,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value=o),type:"text",placeholder:"搜索角色...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",onInput:P},null,544),[[I,p.value]]),t[5]||(t[5]=e("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>g.value=o),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",onChange:$},[...t[6]||(t[6]=[D('<option value="" data-v-1fed902b>所有分类</option><option value="anime" data-v-1fed902b>动漫</option><option value="game" data-v-1fed902b>游戏</option><option value="movie" data-v-1fed902b>电影</option><option value="book" data-v-1fed902b>书籍</option><option value="original" data-v-1fed902b>原创</option><option value="historical" data-v-1fed902b>历史</option><option value="vtuber" data-v-1fed902b>VTuber</option>',8)])],544),[[M,g.value]]),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>x.value=o),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",onChange:F},[...t[7]||(t[7]=[e("option",{value:"popular"},"最受欢迎",-1),e("option",{value:"newest"},"最新添加",-1),e("option",{value:"rating"},"评分最高",-1),e("option",{value:"chats"},"对话最多",-1)])],544),[[M,x.value]])])]),m.value?(l(),a("div",W,[...t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):c.value.length>0?(l(),a("div",X,[(l(!0),a(C,null,V(c.value,o=>(l(),a("div",{key:o.id,class:"bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow cursor-pointer overflow-hidden",onClick:i=>S(o.id)},[e("div",Z,[o.avatar?(l(),a("img",{key:0,src:o.avatar,alt:o.name,class:"w-full h-full object-cover"},null,8,ee)):(l(),a("div",te,[e("span",oe,n(o.name.charAt(0)),1)])),o.isNew?(l(),a("div",se," 新 ")):y("",!0),o.isPremium?(l(),a("div",ae," 高级 ")):y("",!0)]),e("div",le,[e("h3",re,n(o.name),1),e("p",ie,"创建者: "+n(o.creator),1),e("p",ne,n(o.description),1),e("div",de,[e("div",ue,[e("span",ce,[t[10]||(t[10]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),B(" "+n(_(o.chats)),1)]),e("span",ve,[t[11]||(t[11]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),B(" "+n(_(o.likes)),1)])]),e("div",me,[t[12]||(t[12]=e("svg",{class:"w-4 h-4 text-yellow-400 fill-current",viewBox:"0 0 20 20"},[e("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})],-1)),e("span",pe,n(o.rating.toFixed(1)),1)])])])],8,Y))),128))])):(l(),a("div",ge,[...t[13]||(t[13]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"没有找到角色",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"试试调整筛选条件或搜索其他内容",-1)])])),v.value>1?(l(),a("div",xe,[e("nav",fe,[e("button",{disabled:r.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",onClick:t[3]||(t[3]=o=>h(r.value-1))},[...t[14]||(t[14]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],8,he),(l(!0),a(C,null,V(z.value,o=>(l(),a("button",{key:o,class:H([o===r.value?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"]),onClick:i=>h(o)},n(o),11,be))),128)),e("button",{disabled:r.value===v.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",onClick:t[4]||(t[4]=o=>h(r.value+1))},[...t[15]||(t[15]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])],8,ye)])])):y("",!0)])]))}}),Ve=K(we,[["__scopeId","data-v-1fed902b"]]);export{Ve as default};

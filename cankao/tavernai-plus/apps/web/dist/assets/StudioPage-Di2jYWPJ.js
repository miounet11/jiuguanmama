import{d as B,l as z,r as g,o as L,c as r,a as d,b as t,f as S,t as a,j as c,p as w,z as f,F as H,i as D,u as F,y as V}from"./index-Dgends3d.js";import{i as h}from"./axios-DIbbNOPG.js";const A={class:"min-h-screen bg-gray-50 py-8"},$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},N={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},R={class:"bg-white rounded-lg shadow p-6"},I={class:"flex items-center"},O={class:"ml-5"},T={class:"text-2xl font-semibold text-gray-900"},U={class:"bg-white rounded-lg shadow p-6"},E={class:"flex items-center"},K={class:"ml-5"},P={class:"text-2xl font-semibold text-gray-900"},q={class:"bg-white rounded-lg shadow p-6"},G={class:"flex items-center"},J={class:"ml-5"},Q={class:"text-2xl font-semibold text-gray-900"},W={class:"bg-white rounded-lg shadow p-6"},X={class:"flex items-center"},Y={class:"ml-5"},Z={class:"text-2xl font-semibold text-gray-900"},tt={class:"flex justify-between items-center mb-6"},et={class:"flex space-x-2"},st={class:"bg-white rounded-lg shadow overflow-hidden"},ot={class:"min-w-full divide-y divide-gray-200"},at={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-4 whitespace-nowrap"},lt={class:"flex items-center"},nt={class:"flex-shrink-0 h-10 w-10"},rt=["src","alt"],dt={class:"ml-4"},ct={class:"text-sm font-medium text-gray-900"},pt={class:"text-sm text-gray-500"},xt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gt={class:"flex items-center space-x-4"},ht={class:"flex items-center"},vt={class:"flex items-center"},mt={class:"px-6 py-4 whitespace-nowrap"},wt={class:"flex items-center"},ft={class:"ml-1 text-sm text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},yt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},_t={class:"flex justify-end space-x-2"},bt=["onClick"],Ct=["onClick"],Mt=["onClick"],jt={key:0,class:"text-center py-12 bg-white rounded-lg"},St=B({__name:"StudioPage",setup(Bt){const p=F(),i=z({totalCharacters:0,totalChats:0,avgRating:0,totalLikes:0}),l=g([]),x=g("all"),u=g("updated"),k={published:"已发布",draft:"草稿",archived:"已归档"},n=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString(),y=s=>new Date(s).toLocaleDateString("zh-CN"),_=async()=>{try{const s=await h.get("/api/studio/stats");Object.assign(i,s.data)}catch{i.totalCharacters=5,i.totalChats=1234,i.avgRating=4.2,i.totalLikes=567}},b=async()=>{try{const s=await h.get("/api/studio/characters",{params:{status:x.value,sort:u.value}});l.value=s.data}catch{l.value=[{id:"1",name:"智能助手",avatar:"",category:"AI助手",status:"published",chats:523,likes:89,rating:4.5,updatedAt:new Date().toISOString()},{id:"2",name:"故事创作者",avatar:"",category:"创意",status:"draft",chats:0,likes:0,rating:0,updatedAt:new Date(Date.now()-864e5).toISOString()}]}},v=()=>{p.push("/studio/character/create")},C=s=>{p.push(`/characters/${s}`)},M=s=>{p.push(`/studio/character/edit/${s}`)},j=async s=>{if(confirm("确定要删除这个角色吗？此操作不可恢复。"))try{await h.delete(`/api/characters/${s}`),l.value=l.value.filter(e=>e.id!==s)}catch(e){console.error("Failed to delete character:",e)}};return L(()=>{_(),b()}),(s,e)=>(d(),r("div",A,[t("div",$,[e[24]||(e[24]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"创作工作室"),t("p",{class:"mt-2 text-gray-600"},"管理您创建的角色和内容")],-1)),t("div",N,[t("div",R,[t("div",I,[e[3]||(e[3]=t("div",{class:"flex-shrink-0 bg-indigo-500 rounded-lg p-3"},[t("svg",{class:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",O,[e[2]||(e[2]=t("p",{class:"text-gray-500 text-sm"},"总角色数",-1)),t("p",T,a(i.totalCharacters),1)])])]),t("div",U,[t("div",E,[e[5]||(e[5]=t("div",{class:"flex-shrink-0 bg-green-500 rounded-lg p-3"},[t("svg",{class:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t("div",K,[e[4]||(e[4]=t("p",{class:"text-gray-500 text-sm"},"总对话数",-1)),t("p",P,a(n(i.totalChats)),1)])])]),t("div",q,[t("div",G,[e[7]||(e[7]=t("div",{class:"flex-shrink-0 bg-yellow-500 rounded-lg p-3"},[t("svg",{class:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),t("div",J,[e[6]||(e[6]=t("p",{class:"text-gray-500 text-sm"},"平均评分",-1)),t("p",Q,a(i.avgRating.toFixed(1)),1)])])]),t("div",W,[t("div",X,[e[9]||(e[9]=t("div",{class:"flex-shrink-0 bg-red-500 rounded-lg p-3"},[t("svg",{class:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])],-1)),t("div",Y,[e[8]||(e[8]=t("p",{class:"text-gray-500 text-sm"},"总收藏数",-1)),t("p",Z,a(n(i.totalLikes)),1)])])])]),t("div",tt,[t("div",{class:"flex space-x-4"},[t("button",{onClick:v,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center"},[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" 创建新角色 ",-1)])])]),t("div",et,[w(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>x.value=o),class:"px-4 py-2 border rounded-lg"},[...e[11]||(e[11]=[t("option",{value:"all"},"全部状态",-1),t("option",{value:"published"},"已发布",-1),t("option",{value:"draft"},"草稿",-1),t("option",{value:"archived"},"已归档",-1)])],512),[[f,x.value]]),w(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),class:"px-4 py-2 border rounded-lg"},[...e[12]||(e[12]=[t("option",{value:"updated"},"最近更新",-1),t("option",{value:"created"},"创建时间",-1),t("option",{value:"chats"},"对话数量",-1),t("option",{value:"rating"},"评分",-1)])],512),[[f,u.value]])])]),t("div",st,[t("table",ot,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 角色 "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 状态 "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 统计 "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 评分 "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," 更新时间 "),t("th",{class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"操作")])])],-1)),t("tbody",at,[(d(!0),r(H,null,D(l.value,o=>(d(),r("tr",{key:o.id},[t("td",it,[t("div",lt,[t("div",nt,[t("img",{src:o.avatar||"/default-avatar.png",alt:o.name,class:"h-10 w-10 rounded-full"},null,8,rt)]),t("div",dt,[t("div",ct,a(o.name),1),t("div",pt,a(o.category),1)])])]),t("td",xt,[t("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",o.status==="published"?"bg-green-100 text-green-800":o.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},a(k[o.status]),3)]),t("td",ut,[t("div",gt,[t("span",ht,[e[13]||(e[13]=t("svg",{class:"w-4 h-4 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),c(" "+a(n(o.chats)),1)]),t("span",vt,[e[14]||(e[14]=t("svg",{class:"w-4 h-4 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),c(" "+a(n(o.likes)),1)])])]),t("td",mt,[t("div",wt,[e[15]||(e[15]=t("svg",{class:"w-4 h-4 text-yellow-400 fill-current",viewBox:"0 0 20 20"},[t("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})],-1)),t("span",ft,a(o.rating.toFixed(1)),1)])]),t("td",kt,a(y(o.updatedAt)),1),t("td",yt,[t("div",_t,[t("button",{onClick:m=>C(o.id),class:"text-gray-600 hover:text-gray-900",title:"查看"},[...e[16]||(e[16]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,bt),t("button",{onClick:m=>M(o.id),class:"text-indigo-600 hover:text-indigo-900",title:"编辑"},[...e[17]||(e[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ct),t("button",{onClick:m=>j(o.id),class:"text-red-600 hover:text-red-900",title:"删除"},[...e[18]||(e[18]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Mt)])])]))),128))])])]),l.value.length===0?(d(),r("div",jt,[e[21]||(e[21]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),e[22]||(e[22]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"还没有创建角色",-1)),e[23]||(e[23]=t("p",{class:"mt-1 text-sm text-gray-500"},"开始创建您的第一个角色吧",-1)),t("div",{class:"mt-6"},[t("button",{onClick:v,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700"},[...e[20]||(e[20]=[t("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" 创建新角色 ",-1)])])])])):S("",!0)])]))}});export{St as default};

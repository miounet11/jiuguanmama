import{d as c,l as w,r as k,c as a,a as d,b as e,m,p as l,j as u,v as n,z as V,e as M,F as U,i as C,B as S,D as p,q as h,u as F,t as N}from"./index-Dgends3d.js";import{i as y}from"./axios-DIbbNOPG.js";const T={class:"min-h-screen bg-gray-50 py-8"},j={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},q={class:"bg-white shadow rounded-lg p-6"},B={class:"grid grid-cols-1 gap-6"},D={class:"flex items-center space-x-4"},W={class:"w-24 h-24 rounded-full overflow-hidden bg-gray-100"},z=["src"],K={key:1,class:"w-full h-full flex items-center justify-center text-gray-400"},P={class:"bg-white shadow rounded-lg p-6"},R={class:"space-y-6"},$={class:"flex flex-wrap gap-2 mb-2"},A=["onClick"],E={class:"flex space-x-2"},I=["onKeypress"],L={class:"bg-white shadow rounded-lg p-6"},G={class:"space-y-4"},H={class:"space-y-2"},J={class:"flex items-center"},O={class:"flex items-center"},Q={class:"flex items-center"},X={class:"flex items-center"},te=c({__name:"CreateCharacter",setup(Y){const b=F(),s=w({name:"",avatar:"",category:"",description:"",personality:[],background:"",scenario:"",firstMessage:"",visibility:"public",isNSFW:!1}),r=k(""),g=()=>{r.value.trim()&&!s.personality.includes(r.value.trim())&&(s.personality.push(r.value.trim()),r.value="")},x=i=>{s.personality=s.personality.filter(t=>t!==i)},f=async()=>{try{const i=await y.post("/api/characters",{...s,status:"published"});b.push(`/characters/${i.data.id}`)}catch(i){console.error("Failed to create character:",i),alert("创建角色失败，请稍后再试")}},v=async()=>{try{await y.post("/api/characters",{...s,status:"draft"}),b.push("/studio")}catch(i){console.error("Failed to save draft:",i),alert("保存草稿失败，请稍后再试")}};return(i,t)=>(d(),a("div",T,[e("div",j,[t[31]||(t[31]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"创建新角色"),e("p",{class:"mt-2 text-gray-600"},"设计您的独特角色，赋予它生命力")],-1)),e("form",{onSubmit:m(f,["prevent"]),class:"space-y-8"},[e("div",q,[t[18]||(t[18]=e("h2",{class:"text-lg font-medium mb-4"},"基本信息",-1)),e("div",B,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"角色头像",-1)),e("div",D,[e("div",W,[s.avatar?(d(),a("img",{key:0,src:s.avatar,class:"w-full h-full object-cover"},null,8,z)):(d(),a("div",K,[...t[11]||(t[11]=[e("svg",{class:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]))]),t[12]||(t[12]=e("button",{type:"button",class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," 选择图片 ",-1))])]),e("div",null,[t[14]||(t[14]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-1"},[u(" 角色名称 "),e("span",{class:"text-red-500"},"*")],-1)),l(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s.name=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",placeholder:"给您的角色起个名字"},null,512),[[n,s.name]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1"},[u(" 角色分类 "),e("span",{class:"text-red-500"},"*")],-1)),l(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=o=>s.category=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500"},[...t[15]||(t[15]=[M('<option value="">请选择分类</option><option value="anime">动漫</option><option value="game">游戏</option><option value="movie">电影</option><option value="book">书籍</option><option value="original">原创</option><option value="historical">历史</option><option value="vtuber">VTuber</option><option value="assistant">AI助手</option>',9)])],512),[[V,s.category]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"},[u(" 简短描述 "),e("span",{class:"text-red-500"},"*")],-1)),l(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=o=>s.description=o),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",placeholder:"用几句话介绍您的角色"},null,512),[[n,s.description]])])])]),e("div",P,[t[23]||(t[23]=e("h2",{class:"text-lg font-medium mb-4"},"角色设定",-1)),e("div",R,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"性格特征",-1)),e("div",$,[(d(!0),a(U,null,C(s.personality,o=>(d(),a("span",{key:o,class:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm flex items-center"},[u(N(o)+" ",1),e("button",{type:"button",onClick:Z=>x(o),class:"ml-2 text-indigo-500 hover:text-indigo-700"}," × ",8,A)]))),128))]),e("div",E,[l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.value=o),type:"text",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg",placeholder:"添加性格特征",onKeypress:S(m(g,["prevent"]),["enter"])},null,40,I),[[n,r.value]]),e("button",{type:"button",onClick:g,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," 添加 ")])]),e("div",null,[t[20]||(t[20]=e("label",{for:"background",class:"block text-sm font-medium text-gray-700 mb-1"}," 背景故事 ",-1)),l(e("textarea",{id:"background","onUpdate:modelValue":t[4]||(t[4]=o=>s.background=o),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",placeholder:"描述角色的背景故事"},null,512),[[n,s.background]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"scenario",class:"block text-sm font-medium text-gray-700 mb-1"}," 场景设定 ",-1)),l(e("textarea",{id:"scenario","onUpdate:modelValue":t[5]||(t[5]=o=>s.scenario=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",placeholder:"设定对话发生的场景"},null,512),[[n,s.scenario]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"firstMessage",class:"block text-sm font-medium text-gray-700 mb-1"},[u(" 开场白 "),e("span",{class:"text-red-500"},"*")],-1)),l(e("textarea",{id:"firstMessage","onUpdate:modelValue":t[6]||(t[6]=o=>s.firstMessage=o),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",placeholder:"角色的第一句话"},null,512),[[n,s.firstMessage]])])])]),e("div",L,[t[29]||(t[29]=e("h2",{class:"text-lg font-medium mb-4"},"高级设置",-1)),e("div",G,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"可见性",-1)),e("div",H,[e("label",J,[l(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.visibility=o),type:"radio",value:"public",class:"mr-2"},null,512),[[p,s.visibility]]),t[24]||(t[24]=e("span",null,"公开 - 所有人都可以使用",-1))]),e("label",O,[l(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.visibility=o),type:"radio",value:"unlisted",class:"mr-2"},null,512),[[p,s.visibility]]),t[25]||(t[25]=e("span",null,"不公开 - 仅通过链接访问",-1))]),e("label",Q,[l(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.visibility=o),type:"radio",value:"private",class:"mr-2"},null,512),[[p,s.visibility]]),t[26]||(t[26]=e("span",null,"私有 - 仅自己可用",-1))])])]),e("div",null,[e("label",X,[l(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.isNSFW=o),type:"checkbox",class:"mr-2"},null,512),[[h,s.isNSFW]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"包含成人内容 (NSFW)",-1))])])])]),e("div",{class:"flex justify-end space-x-4"},[e("button",{type:"button",onClick:v,class:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"}," 保存草稿 "),t[30]||(t[30]=e("button",{type:"submit",class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," 发布角色 ",-1))])],32)])]))}});export{te as default};

# Task 004: 首页重构

## 任务信息
- **Epic**: frontend-design-system-overhaul
- **任务标题**: 全新首页设计 + 移动端适配
- **任务编号**: 004
- **估算时间**: 3天
- **优先级**: 高
- **状态**: 待开始
- **分配**: 待分配
- **创建时间**: 2025-09-23T07:26:51Z
- **依赖任务**: [001, 002]
- **可并行执行**: true

## 任务描述

重构TavernAI Plus首页，创建现代化、有吸引力的用户体验，突出平台特色和价值主张，支持深色主题，并完美适配移动端设备。

## 详细需求

### 1. 整体设计理念
- **现代化视觉**：采用简洁、现代的设计语言
- **价值突出**：清晰展示平台核心价值和特色功能
- **用户引导**：为新用户提供清晰的使用指引
- **品牌强化**：统一品牌视觉和调性

### 2. 核心功能区块
- **Hero区域**：主要价值主张和CTA按钮
- **特色功能展示**：AI对话、角色创建、市场等核心功能
- **用户证言**：社区反馈和推荐
- **快速开始**：新手引导和快速体验入口

### 3. 响应式设计
- **移动端优先**：移动端体验优化
- **多断点适配**：Phone/Tablet/Desktop完美适配
- **触控优化**：移动端交互体验优化
- **性能优化**：移动端加载速度优化

### 4. 深色主题支持
- **主题一致性**：与整体设计系统保持一致
- **对比度优化**：确保可读性和可访问性
- **动画效果**：主题切换平滑过渡
- **图片适配**：深色主题下的图片优化

## 技术实现

### 文件结构
```
apps/web/src/views/home/
├── HomeView.vue              # 主页面组件
├── components/
│   ├── HeroSection.vue       # 英雄区域
│   ├── FeatureShowcase.vue   # 功能展示
│   ├── UserTestimonials.vue  # 用户证言
│   ├── QuickStart.vue        # 快速开始
│   └── CallToAction.vue      # 行动号召
└── styles/
    ├── home.scss             # 首页样式
    ├── hero.scss             # 英雄区域样式
    └── responsive.scss       # 响应式样式
```

### 核心组件实现

#### HeroSection组件
```vue
<template>
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">{{ $t('home.hero.title') }}</h1>
      <p class="hero-subtitle">{{ $t('home.hero.subtitle') }}</p>
      <div class="hero-actions">
        <RouterLink to="/characters" class="btn-primary">
          {{ $t('home.hero.exploreCharacters') }}
        </RouterLink>
        <RouterLink to="/chat" class="btn-secondary">
          {{ $t('home.hero.startChat') }}
        </RouterLink>
      </div>
    </div>
    <div class="hero-visual">
      <div class="floating-cards">
        <!-- 浮动角色卡片展示 -->
      </div>
    </div>
  </section>
</template>
```

#### FeatureShowcase组件
```vue
<template>
  <section class="feature-showcase">
    <div class="container">
      <h2 class="section-title">{{ $t('home.features.title') }}</h2>
      <div class="features-grid">
        <FeatureCard
          v-for="feature in features"
          :key="feature.id"
          :icon="feature.icon"
          :title="feature.title"
          :description="feature.description"
          :link="feature.link"
        />
      </div>
    </div>
  </section>
</template>
```

### 样式系统

#### 响应式设计
```scss
// responsive.scss
.hero-section {
  // Desktop优先设计
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;

  // Tablet适配
  @include respond-below('tablet') {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  // Mobile适配
  @include respond-below('mobile') {
    gap: 1rem;
    padding: 1rem;
  }
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;

  @include respond-below('mobile') {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
}
```

#### 深色主题适配
```scss
// home.scss
.hero-section {
  background: linear-gradient(135deg,
    var(--color-primary-light) 0%,
    var(--color-primary) 100%);

  [data-theme="dark"] & {
    background: linear-gradient(135deg,
      var(--color-primary-dark) 0%,
      var(--color-background-dark) 100%);
  }
}

.feature-card {
  background: var(--color-card-background);
  border: 1px solid var(--color-border);

  &:hover {
    box-shadow: var(--shadow-card-hover);
    transform: translateY(-4px);
  }
}
```

## 性能优化

### 1. 图片优化
- **WebP格式**：现代浏览器使用WebP格式
- **响应式图片**：不同尺寸设备加载合适的图片
- **懒加载**：非关键图片懒加载
- **压缩优化**：图片压缩和优化

### 2. 代码分割
- **路由级分割**：首页独立打包
- **组件级分割**：大型组件异步加载
- **依赖优化**：减少不必要的依赖
- **Tree Shaking**：移除未使用的代码

### 3. 缓存策略
- **静态资源缓存**：CSS/JS文件长期缓存
- **图片缓存**：图片资源缓存策略
- **API缓存**：合理的API响应缓存
- **Service Worker**：离线缓存支持

## 测试要求

### 1. 单元测试
```typescript
// HomeView.test.ts
describe('HomeView', () => {
  it('应该正确渲染Hero区域', () => {
    const wrapper = mount(HomeView)
    expect(wrapper.find('.hero-section')).toExist()
    expect(wrapper.find('.hero-title')).toContainText('Welcome')
  })

  it('应该正确处理主题切换', async () => {
    const wrapper = mount(HomeView)
    await wrapper.vm.toggleTheme()
    expect(document.documentElement).toHaveAttribute('data-theme', 'dark')
  })
})
```

### 2. 响应式测试
- **多设备测试**：在不同设备上测试布局
- **触控测试**：移动端触控交互测试
- **性能测试**：页面加载性能测试
- **可访问性测试**：无障碍访问测试

## 验收标准

### 功能验收
- [ ] Hero区域正确展示价值主张和CTA
- [ ] 特色功能展示完整且链接正确
- [ ] 用户证言区域展示真实反馈
- [ ] 快速开始流程引导清晰

### 设计验收
- [ ] 视觉设计符合设计系统规范
- [ ] 深色主题完美适配
- [ ] 动画效果流畅自然
- [ ] 品牌调性统一一致

### 响应式验收
- [ ] 移动端(320px-768px)完美适配
- [ ] 平板端(768px-1024px)布局合理
- [ ] 桌面端(1024px+)充分利用空间
- [ ] 各断点间过渡平滑

### 性能验收
- [ ] 首屏加载时间 < 2秒
- [ ] 图片加载优化完成
- [ ] 代码分割实施完成
- [ ] Lighthouse性能评分 > 90

## 文件清单

### 新增文件
- `apps/web/src/views/home/HomeView.vue`
- `apps/web/src/views/home/components/HeroSection.vue`
- `apps/web/src/views/home/components/FeatureShowcase.vue`
- `apps/web/src/views/home/components/UserTestimonials.vue`
- `apps/web/src/views/home/components/QuickStart.vue`
- `apps/web/src/views/home/components/CallToAction.vue`
- `apps/web/src/views/home/styles/home.scss`
- `apps/web/src/views/home/styles/hero.scss`
- `apps/web/src/views/home/styles/responsive.scss`

### 修改文件
- `apps/web/src/router/index.ts` - 更新首页路由
- `apps/web/src/locales/zh-CN.json` - 添加首页国际化文本
- `apps/web/src/locales/en-US.json` - 添加首页英文文本

## 注意事项

1. **设计一致性**：确保与整体设计系统保持一致
2. **性能优先**：优化加载速度，特别是移动端
3. **可访问性**：遵循WCAG 2.1 AA标准
4. **SEO优化**：正确的meta标签和结构化数据
5. **国际化支持**：预留多语言扩展空间

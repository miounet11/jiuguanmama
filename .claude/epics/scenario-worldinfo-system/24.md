---
name: 前端剧本管理器开发
status: open
created: 2025-09-22T13:12:00Z
updated: 
github: https://github.com//issues/24
depends_on: [22]
parallel: true
conflicts_with: []
---

# Task: 前端剧本管理器开发

## Description

基于Vue 3 + Element Plus技术栈开发完整的剧本管理前端界面。包括剧本列表、编辑器、世界信息条目管理、关键词配置等核心组件，实现直观易用的用户界面和流畅的用户体验。

## Acceptance Criteria

- [ ] 实现ScenarioList组件，支持剧本列表展示、搜索、筛选
- [ ] 实现ScenarioEditor组件，支持剧本基本信息编辑
- [ ] 实现WorldInfoEntry组件，支持条目的创建、编辑、删除
- [ ] 实现KeywordManager组件，支持关键词配置和测试
- [ ] 实现ScenarioPreview组件，支持剧本预览和匹配测试
- [ ] 添加Pinia状态管理，实现useScenarioStore
- [ ] 支持拖拽式条目重排和分类管理
- [ ] 实现实时预览功能，编辑时即时查看效果
- [ ] 响应式设计，支持桌面和移动端
- [ ] 新用户能在5分钟内创建第一个剧本

## Technical Details

### 组件架构设计
```vue
<!-- 核心组件结构 -->
ScenarioManagement/
├── ScenarioList.vue          # 剧本列表和搜索
├── ScenarioEditor.vue        # 剧本编辑器主界面
├── WorldInfoEntry.vue        # 单个条目编辑组件
├── KeywordManager.vue        # 关键词配置组件
├── ScenarioPreview.vue       # 剧本预览和测试
└── ImportExportDialog.vue    # 导入导出对话框 (后续任务)
```

### 文件影响
- `cankao/tavernai-plus/apps/web/src/views/scenarios/` - 页面组件目录
- `cankao/tavernai-plus/apps/web/src/components/scenario/` - 剧本组件目录
- `cankao/tavernai-plus/apps/web/src/stores/scenario.ts` - Pinia状态管理
- `cankao/tavernai-plus/apps/web/src/services/scenarioApi.ts` - API客户端
- `cankao/tavernai-plus/apps/web/src/router/index.ts` - 路由配置

### 状态管理设计
```typescript
interface ScenarioStore {
  scenarios: Scenario[];
  currentScenario: Scenario | null;
  loading: boolean;

  // Actions
  fetchScenarios(): Promise<void>;
  createScenario(data: CreateScenarioRequest): Promise<void>;
  updateScenario(id: string, data: UpdateScenarioRequest): Promise<void>;
  deleteScenario(id: string): Promise<void>;

  // World Info Actions
  addEntry(scenarioId: string, entry: WorldInfoEntry): Promise<void>;
  updateEntry(scenarioId: string, entryId: string, data: UpdateEntryRequest): Promise<void>;
  deleteEntry(scenarioId: string, entryId: string): Promise<void>;
}
```

### 用户体验设计
- **拖拽排序**: 使用SortableJS实现条目拖拽重排
- **实时预览**: 编辑器与预览器分屏显示
- **快捷操作**: 键盘快捷键支持（Ctrl+S保存、Ctrl+N新建等）
- **智能提示**: 关键词输入时的自动补全和语法高亮

## Dependencies

- [ ] Task 003: 剧本管理API开发 (依赖后端接口)
- [ ] Vue 3生态系统和Element Plus组件库
- [ ] 现有的前端架构和设计系统
- [ ] 拖拽库 (如SortableJS) 和富文本编辑器

## Effort Estimate

- **Size**: L (Large)
- **Hours**: 32-40小时
- **Parallel**: true (可与后端任务并行开发，使用mock数据)

## Definition of Done

- [ ] 代码实现: 完整的前端组件和交互功能
- [ ] 测试通过: 组件单元测试和E2E测试
- [ ] 文档更新: 组件文档和使用指南
- [ ] 代码审查: 通过UI/UX和代码质量审查
- [ ] 用户测试: 通过可用性测试和反馈收集
